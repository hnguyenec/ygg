<div class="the-thing-view" *ngIf="theThing">
  <div
    fxLayout="row"
    fxLayoutAlign="end center"
    fxLayoutGap="10px"
    *ngIf="!readonly"
  >
    <div>
      <button
        mat-fab
        class="create-clone"
        (click)="createClone()"
        matTooltip="複製"
      >
        <mat-icon>file_copy</mat-icon>
      </button>
    </div>
    <div *ngIf="!readonly && isOwner">
      <button
        mat-fab
        class="edit"
        (click)="gotoEdit()"
        matTooltip="修改這個東東"
      >
        <mat-icon>edit</mat-icon>
      </button>
    </div>
    <!-- <div *ngIf="isPendingRelation">
      <button
        mat-fab
        class="link-relation-back"
        (click)="linkRelationBack()"
        matTooltip="回到前一個編輯的關係連結"
      >
        <mat-icon>call_merge</mat-icon>
      </button>
    </div> -->
  </div>
  <div *ngIf="!!theThingViewComponent">
    <the-thing-imitation-view
      [theThing]="theThing"
      [component]="theThingViewComponent"
    ></the-thing-imitation-view>
  </div>
  <div *ngIf="!theThingViewComponent">
    <div class="name">
      <h2>{{ theThing.name }}</h2>
    </div>
    <div class="tags">
      <ygg-tags-view [tags]="theThing.tags"></ygg-tags-view>
    </div>
    <br />
    <div class="owner">
      <ygg-user-thumbnail [id]="theThing.ownerId"></ygg-user-thumbnail>
    </div>
    <br />
    <div class="cells">
      <div
        *ngFor="let cellItem of theThing.cells | keyvalue"
        class="cell"
        [attr.cell-name]="cellItem.value.name"
      >
        <mat-card>
          <mat-card-content>
            <the-thing-cell-view [cell]="cellItem.value"></the-thing-cell-view>
          </mat-card-content>
        </mat-card>
      </div>
      <br />
      <div class="relation-list">
        <div
          *ngFor="let relation of relationObjects | keyvalue"
          [attr.relation-name]="relation.key"
        >
          <div >
            <h3>{{ relation.key }}</h3>
            <ygg-image-thumbnail-list [items$]="relation.value"></ygg-image-thumbnail-list>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
