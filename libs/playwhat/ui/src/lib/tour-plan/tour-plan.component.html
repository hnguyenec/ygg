<div class="tour-plan" *ngIf="tourPlan">
  <div class="purchases">
    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
      <div>
        <h2>預訂項目</h2>
      </div>
      <div *ngIf="!readonly">
        <button
          class="import-to-cart edit"
          mat-mini-fab
          matTooltip="修改購物車"
          (click)="importToCart()"
        >
          <mat-icon>add_shopping_cart </mat-icon>
        </button>
      </div>
    </div>
    <div fxLayout="row wrap" fxLayoutAlign="start start" fxLayoutGap="10px">
      <div *ngFor="let pr of purchaseRelations" [attr.object-id]="pr.objectId">
        <the-thing-thumbnail
          [id]="pr.objectId"
          size="small"
        ></the-thing-thumbnail>
      </div>
    </div>
    <div fxLayout="row" fxLayoutAlign="end end">
      <h4 class="total-charge">
        總價：<ygg-price [price]="totalCharge"></ygg-price>
      </h4>
    </div>
  </div>
  <br />
  <div class="schedule">
    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
      <h2>行程表</h2>
      <div *ngIf="actionSchedule.granted">
        <button
          type="button"
          mat-fab
          class="action-schedule"
          [matTooltip]="actionSchedule.tooltip"
          (click)="runAction(actionSchedule)"
        >
          <mat-icon>{{ actionSchedule.icon }}</mat-icon>
        </button>
      </div>
      <div *ngIf="actionSAR.granted">
        <button
          type="button"
          mat-fab
          class="send-approval-requests"
          [matTooltip]="actionSAR.tooltip"
          (click)="runAction(actionSAR)"
        >
          <mat-icon>{{ actionSAR.icon }}</mat-icon>
        </button>
      </div>
    </div>
    <div fxLayout="row" fxLayoutAlign="start stretch" fxLayoutGap="50px">
      <ng-container *ngFor="let eventId of eventIds">
        <the-thing-thumbnail
          class="event"
          [id]="eventId"
          [imitation]="ImitationEvent"
        ></the-thing-thumbnail>
        <mat-divider [vertical]="true"></mat-divider>
      </ng-container>
    </div>
  </div>
  <div class="the-thing">
    <the-thing [id]="tourPlan.id" [imitation]="imitation"></the-thing>
  </div>
</div>
