<div class="play-view" *ngIf="theThing">
  <div
    fxLayout="row"
    fxLayoutAlign="space-between center"
    fxLayoutGap="30px"
    [formGroup]="formGroup"
  >
    <ygg-omni-type-view-control
      class="name"
      formControlName="name"
      type="text"
      [editable]="!readonly"
      [viewStyle]="nameStyle"
    >
      <div errors>
        <div *ngIf="formGroup.get('name').errors?.required">
          請填入體驗名稱
        </div>
      </div>
    </ygg-omni-type-view-control>
    <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="20px">
      <div>
        <button
          class="add-to-cart"
          mat-fab
          matTooltip="加入購物車"
          (click)="purchase()"
        >
          <mat-icon>add_shopping_cart</mat-icon>
        </button>
      </div>
      <div *ngIf="!readonly">
        <button
          type="button"
          mat-fab
          class="save edit"
          matTooltip="儲存體驗"
          [disabled]="!isThingValid()"
          (click)="save()"
        >
          <mat-icon>save</mat-icon>
        </button>
      </div>
    </div>
  </div>
  <div [formGroup]="formGroupCells">
    <div *ngFor="let cellName of orderedCellNames">
      <div
        [attr.cell-name]="cellName"
        [hidden]="!isCellControlShown(cellName)"
      >
        <h3>{{ cellName }}</h3>
        <the-thing-cell
          [formControlName]="cellName"
          [readonly]="readonly"
          [required]="isCellRequired(cellName)"
        ></the-thing-cell>
      </div>
    </div>
  </div>
  <div
    fxLayout="row"
    fxLayoutAlign="start center"
    fxLayoutGap="10px"
    *ngIf="!readonly && isThingValid()"
  >
    <h2>
      增加其他資料
    </h2>
    <div>
      <button
        type="button"
        mat-mini-fab
        class="add-cell edit"
        (click)="addCell()"
      >
        <mat-icon>add</mat-icon>
      </button>
    </div>
  </div>
</div>
