<div class="ygg-play-form">
  <form [formGroup]="formGroup" [id]="formModel.name">
    <ygg-action-bar-layout position="top">
      <div ygg-action-bar-button>
        <button
          id="submit"
          class="submit"
          [disabled]="formGroup.invalid"
          mat-fab
          type="button"
          (click)="onSubmit()"
        >
          <mat-icon>save</mat-icon>
        </button>
      </div>
      <div ygg-action-bar-content>
        <ygg-title-divider>名稱＆簡介</ygg-title-divider>
        <ygg-form-control
          [formGroup]="formGroup"
          [model]="this.formModel.controls['name']"
          id="form-control-name"
        ></ygg-form-control>
        <ygg-form-control
          [formGroup]="formGroup"
          [model]="this.formModel.controls['introduction']"
          id="form-control-introduction"
        ></ygg-form-control>
        <ygg-title-divider>價格</ygg-title-divider>
        <ygg-form-control
          [formGroup]="formGroup"
          [model]="this.formModel.controls['price']"
          id="form-control-price"
        ></ygg-form-control>
        <ygg-title-divider>相簿＆照片</ygg-title-divider>
        <ygg-form-control
          [formGroup]="formGroup"
          [model]="this.formModel.controls['album']"
          id="form-control-album"
        ></ygg-form-control>
        <ygg-title-divider>體驗時長</ygg-title-divider>
        <ygg-form-control
          [formGroup]="formGroup"
          [model]="this.formModel.controls['minuteLength']"
          id="form-control-minuteLength"
        ></ygg-form-control>
        <ygg-title-divider>服務時段</ygg-title-divider>
        <ygg-form-control
          [formGroup]="formGroup"
          [model]="this.formModel.controls['businessHours']"
          id="form-control-businessHours"
        ></ygg-form-control>
        <ygg-title-divider>地點</ygg-title-divider>
        <ygg-form-control
          [formGroup]="formGroup"
          [model]="this.formModel.controls['location']"
          id="form-control-location"
        ></ygg-form-control>
        <ygg-title-divider>類型標籤</ygg-title-divider>
        <ygg-tags-control
          formControlName="tags"
          taggableType="play"
          label="體驗類型標籤"
        ></ygg-tags-control>
        <ygg-title-divider>附屬品：設備、用具、材料、餐點...</ygg-title-divider>
        <div class="additions-control">
          <!-- <pre>{{ play.additions | json }}</pre> -->
          <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="20px">
            <button
              mat-mini-fab
              type="button"
              class="clear-additions"
              (click)="clearAdditions()"
              matToolTip="移除所有附屬品"
              [disabled]="!(play.additions) || play.additions.length <= 2"
            >
              <mat-icon>delete_sweep</mat-icon>
            </button>
            <button
              type="button"
              mat-mini-fab
              matToolTip="增加附屬品"
              (click)="addAddition()"
              class="add-addition"
            >
              <mat-icon>add</mat-icon>
            </button>
          </div>
          <br />
          <div class="addition-list">
            <div *ngFor="let addition of play.additions; let idx = index">
              <div
                fxLayout="row"
                fxLayoutAlign="start center"
                fxLayoutGap="20px"
                [attr.index]="idx"
              >
                <div class="mat-elevation-z8">
                  <ygg-addition-thumbnail
                    [addition]="addition"
                  ></ygg-addition-thumbnail>
                </div>
                <div>
                  <div
                    fxLayout="row"
                    fxLayoutAlign="end center"
                    fxLayoutGap="10px"
                  >
                    <div>
                      <button
                        type="button"
                        class="edit"
                        mat-mini-fab
                        (click)="editAddition(idx)"
                      >
                        <mat-icon>edit</mat-icon>
                      </button>
                    </div>
                    <div>
                      <button
                        type="button"
                        class="delete"
                        mat-mini-fab
                        (click)="deleteAddition(idx)"
                      >
                        <mat-icon>delete</mat-icon>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ygg-action-bar-layout>
  </form>
</div>
