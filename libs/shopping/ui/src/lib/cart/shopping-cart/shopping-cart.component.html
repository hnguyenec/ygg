<div class="shopping-cart">
  <div class="purchases-table">
    <table mat-table [dataSource]="purchasesDataSource">
      <ng-container matColumnDef="product">
        <th mat-header-cell *matHeaderCellDef>品項</th>
        <td mat-cell *matCellDef="let purchase" class="product-name">
          <ygg-product-thumbnail
            [id]="purchase.productId"
            [type]="purchase.productType"
          ></ygg-product-thumbnail>
        </td>
        <td mat-footer-cell *matFooterCellDef>
          總價
          <!-- <span *ngIf="singlePrice">&nbsp;&#8725;&nbsp;每人</span> -->
        </td>
      </ng-container>

      <ng-container matColumnDef="quantity">
        <th mat-header-cell *matHeaderCellDef>訂購數量</th>
        <td
          mat-cell
          *matCellDef="let purchase; let idx = index"
          class="quantity"
        >
          {{ purchase.quantity }}
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef>價格</th>
        <td mat-cell *matCellDef="let purchase" class='price'>
          <ygg-price
            [price]="purchase.totalPrice"
          ></ygg-price>
        </td>
        <td mat-footer-cell *matFooterCellDef>
          <ygg-price [price]="totalPrice" class='total-price'></ygg-price>
          <!-- <span *ngIf="singlePrice">&nbsp;&#8725;&nbsp;<ygg-price [price]="singlePrice"></ygg-price></span> -->
        </td>
      </ng-container>

      <ng-container matColumnDef="management">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let purchase; let idx = index">
          <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="10px">
            <button
              type="button"
              mat-mini-fab
              (click)="removePurchase(purchase)"
            >
              <mat-icon>delete</mat-icon>
            </button>
            <button
              type="button"
              mat-mini-fab
              (click)="editPurchase(purchase)"
              class='edit'
            >
              <mat-icon>edit</mat-icon>
            </button>
          </div>
        </td>
        <td mat-footer-cell *matFooterCellDef>
          <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="10px">
            <button
              type="button"
              mat-mini-fab
              (click)="removeAll()"
              class="clear-all"
              [disabled]='clearButtonDisabled'
            >
              <mat-icon>delete_sweep</mat-icon>
            </button>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns"
        [attr.item-id]="row.productId"
        [attr.product-id]="row.productId"
      ></tr>
      <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
    </table>
  </div>
</div>
