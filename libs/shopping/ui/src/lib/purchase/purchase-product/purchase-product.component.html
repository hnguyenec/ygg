<div class="purchase-product">
  <div class="purchases" [formGroup]="formGroup">
    <div
      *ngFor="let purchase of purchases; let isFirst = first; let isLast = last"
    >
      <div class="purchase-line" [attr.product-id]="purchase.productId">
        <div>
          <the-thing-thumbnail
            [id]="purchase.productId"
            size="small"
          ></the-thing-thumbnail>
        </div>
        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="20px">
          <ygg-price [price]="purchase.price"></ygg-price>
          <h3>X</h3>
          <div class="quantity">
            <ygg-omni-type-view-control
              type="number"
              [editable]="true"
              [formControlName]="purchase.productId + '_quantity'"
            ></ygg-omni-type-view-control>
          </div>
          <h3>=</h3>
          <ygg-price [price]="purchase.charge"></ygg-price>
        </div>
      </div>
      <div *ngIf="!isLast">
        <mat-divider></mat-divider>
      </div>
    </div>
  </div>
  <div fxLayout="row" fxLayoutAlign="end end" fxLayoutGap="10px">
    <div class="total-charge" *ngIf="purchases && purchases.length > 0">
      <h3>總價：<ygg-price [price]="totalCharge()"></ygg-price></h3>
    </div>
  </div>
</div>
